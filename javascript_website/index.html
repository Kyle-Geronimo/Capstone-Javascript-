<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HotelLink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/image/logo/HTLogo.png">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/home-enhancements.css">
  <!-- Luxury serif + cursive fonts for customer home -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Great+Vibes&display=swap" rel="stylesheet">
</head>

<body>
  <!-- Opening intro overlay: shows before any content -->
  <div id="intro-overlay" class="intro-overlay" aria-hidden="true">
    <div class="intro-overlay-inner">
      <span class="intro-line intro-line-small">Welcome</span>
      <span class="intro-line intro-line-small">to</span>
      <span class="intro-line intro-line-main">HotelLink</span>
    </div>
  </div>

  <header>
    <div class="container">
      <h1>HotelLink</h1>
      <button id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="main-nav">
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
      </button>
      <nav id="main-nav">
        <a href="#home" class="nav-btn">Home</a>
        <a href="#about" class="nav-btn public-only">About Us</a>
        <a href="#contacts" class="nav-btn public-only">Contacts</a>
        <a href="pages/login.html" class="nav-btn public-only">Login</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO / HOME SECTION -->
    <section class="home-hero" id="home">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h2 style="margin-top: 3rem; font-size: 60px;">Experience the magic that awaits behind our doors</h2>
          <p class="lead" style="margin-top: 2rem;">HotelLink connects you with partner hotels in Kumintang Ibaba so you can enjoy seamless, comfortable stays â€” from checkâ€‘in to checkâ€‘out.</p>
        </div>

        <!-- kept for decorative illustration / hero-only content; removed weather from here -->
        <aside class="hero-panel" aria-hidden="true">
          <div class="panel card">
            <img src="/image/logo/HTLogo.png" alt="" style="width:100%;max-width:320px;margin-top:12px;" />
          </div>
        </aside>
      </div>
    </section>

    <!-- ABOUT US / FEATURES (typed cursive tagline) -->
    <section class="home-features" id="about">
      <div class="container">
        <h3 class="section-title">About HotelLink</h3>

        <!-- Cursive typed animation line -->
        <div class="about-typed-wrap">
          <p class="about-typed-lead">HotelLink is all about</p>
          <p class="about-typed-line">
            <span id="about-typed-text"></span>
            <span class="typed-cursor">|</span>
          </p>
        </div>

        <!-- D' Mariners Hotel â€“ Gallery -->
        <div class="card hotel-gallery-card" style="margin-top: 2.5rem; padding: 1.5rem; display:flex; flex-direction:column; gap:1.25rem;">
          <div class="hotel-gallery-hero dmariners-hero">
            <div class="hotel-gallery-hero-inner">
              <h4>Dâ€™ Mariners Hotel â€“ Gallery</h4>
              <p class="muted">A cozy, wellâ€‘kept hotel in Batangas City focused on comfort and warm service.</p>
            </div>
          </div>

          <div class="hotel-gallery-thumbs dmariners-album" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); gap:10px;">
            <a href="/hotelimages/d1.jpg" class="dmariners-thumb gallery-thumb">
              <img src="/hotelimages/d1.jpg" alt="Dâ€™ Mariners Hotel room 1" />
            </a>
            <a href="/hotelimages/d2.jpg" class="dmariners-thumb gallery-thumb">
              <img src="/hotelimages/d2.jpg" alt="Dâ€™ Mariners Hotel room 2" />
            </a>
            <a href="/hotelimages/d3.jpg" class="dmariners-thumb gallery-thumb">
              <img src="/hotelimages/d3.jpg" alt="Dâ€™ Mariners Hotel room 3" />
            </a>
            <a href="/hotelimages/d4.jpg" class="dmariners-thumb gallery-thumb">
              <img src="/hotelimages/d4.jpg" alt="Dâ€™ Mariners Hotel room 4" />
            </a>
          </div>

          <div style="margin-top:0.75rem;">
            <h4 style="margin:0 0 0.35rem 0;">WHY CHOOSE Dâ€™ MARINERS HOTEL</h4>
            <ul class="muted" style="list-style: disc; padding-left: 1.5rem; margin:0 0 0.5rem 0;">
              <li>Clean, cozy, and well-maintained rooms</li>
              <li>Complimentary breakfast for overnight guests</li>
              <li>Courteous and professional staff</li>
              <li>Convenient location near business and leisure areas</li>
              <li>Safe parking space and 24-hour security</li>
            </ul>
            <p class="muted" style="margin:0; max-width:720px;">
              At Dâ€™ Mariners Hotel, we strive to make your stay comfortable, peaceful, and memorable. Whether itâ€™s a family trip,
              business visit, or quick rest, we ensure satisfaction every time.
            </p>
          </div>
        </div>

        <!-- Wennrod Hotel â€“ Gallery -->
        <div class="card hotel-gallery-card" style="margin-top: 1.75rem; padding: 1.5rem; display:flex; flex-direction:column; gap:1.25rem;">
          <div class="hotel-gallery-hero wennrod-hero">
            <div class="hotel-gallery-hero-inner">
              <h4>Wennrod Hotel â€“ Gallery</h4>
              <p class="muted">Discover relaxing rooms and practical comforts in Batangas City.</p>
            </div>
          </div>

          <div class="hotel-gallery-thumbs wennrod-album" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); gap:10px;">
            <a href="/hotelimages/wen1.jpg" class="wennrod-thumb gallery-thumb">
              <img src="/hotelimages/wen1.jpg" alt="Wennrod Hotel room 1" />
            </a>
            <a href="/hotelimages/wen2.jpg" class="wennrod-thumb gallery-thumb">
              <img src="/hotelimages/wen2.jpg" alt="Wennrod Hotel room 2" />
            </a>
            <a href="/hotelimages/wen3.jpg" class="wennrod-thumb gallery-thumb">
              <img src="/hotelimages/wen3.jpg" alt="Wennrod Hotel room 3" />
            </a>
            <a href="/hotelimages/wen4.jpg" class="wennrod-thumb gallery-thumb">
              <img src="/hotelimages/wen4.jpg" alt="Wennrod Hotel room 4" />
            </a>
          </div>

          <div style="margin-top:0.75rem;">
            <h4 style="margin:0 0 0.35rem 0;">WHY CHOOSE WENNROD HOTEL</h4>
            <ul class="muted" style="list-style: disc; padding-left: 1.5rem; margin:0 0 0.5rem 0;">
              <li>Comfortable 2-star rooms with airâ€‘conditioning</li>
              <li>Private bathrooms with relaxing amenities</li>
              <li>Rooms with terraces, balconies, and scenic views</li>
              <li>24-hour front desk, housekeeping, and room service</li>
              <li>Convenient access to key attractions in Batangas City</li>
            </ul>
            <p class="muted" style="margin:0; max-width:720px;">
              WENNROD Hotel offers practical comfort for guests who want relaxing stays in Batangas City, with friendly service and
              thoughtful room amenities for both short and longer visits.
            </p>
          </div>
        </div>

        <!-- Bicotels Hotel â€“ Gallery -->
        <div class="card hotel-gallery-card" style="margin-top: 1.75rem; padding: 1.5rem; display:flex; flex-direction:column; gap:1.25rem;">
          <div class="hotel-gallery-hero bicotels-hero">
            <div class="hotel-gallery-hero-inner">
              <h4>Bicotels Hotel â€“ Gallery</h4>
              <p class="muted">Simple, comfortable stays close to key spots in Batangas City.</p>
            </div>
          </div>

          <div class="hotel-gallery-thumbs bicotels-album" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); gap:10px;">
            <a href="/hotelimages/bic1.jpg" class="bicotels-thumb gallery-thumb">
              <img src="/hotelimages/bic1.jpg" alt="Bicotels Hotel room 1" />
            </a>
            <a href="/hotelimages/bic2.jpg" class="bicotels-thumb gallery-thumb">
              <img src="/hotelimages/bic2.jpg" alt="Bicotels Hotel room 2" />
            </a>
            <a href="/hotelimages/bic3.jpg" class="bicotels-thumb gallery-thumb">
              <img src="/hotelimages/bic3.jpg" alt="Bicotels Hotel room 3" />
            </a>
            <a href="/hotelimages/bic4.jpg" class="bicotels-thumb gallery-thumb">
              <img src="/hotelimages/bic4.jpg" alt="Bicotels Hotel room 4" />
            </a>
          </div>

          <div style="margin-top:0.75rem;">
            <h4 style="margin:0 0 0.35rem 0;">WHY CHOOSE BICOTELS HOTEL</h4>
            <ul class="muted" style="list-style: disc; padding-left: 1.5rem; margin:0 0 0.5rem 0;">
              <li>Comfortable rooms with airâ€‘conditioning</li>
              <li>Private bathrooms with practical amenities</li>
              <li>24-hour front desk and reliable housekeeping</li>
              <li>Free onâ€‘site private parking for guests</li>
              <li>Convenient location near key spots in Batangas City</li>
            </ul>
            <p class="muted" style="margin:0; max-width:720px;">
              Bicotels Hotel offers simple but comfortable stays, ideal for guests who need a practical home base close to
              businesses, dining, and transport hubs around Batangas City.
            </p>
          </div>
        </div>

      </div>
    </section>

    <!-- More hotels sa batanggas -->
    <section class="home-quicklinks" id="contacts">
      <div class="container">
        <h3 class="section-title">Our Hotels in Batangas City</h3>
        <div class="quicklinks-row">
          <article class="quicklink card">
            <div style="display:flex;align-items:flex-start;gap:12px;">
              <img src="/image/logo/DMariners Inn Hotel.jpg" alt="D'Mariners Inn Hotel" style="width:40px;height:40px;border-radius:8px;object-fit:cover;" />

              <div>
                <strong>D'Mariners Inn Hotel</strong>
                <p class="muted">Arceo Rd, Kumintang Ibaba, Batangas City, Philippines</p>
                <p class="muted">Phone: 0917 623 0544</p>
                <p class="muted">Email: dmarinersinnhotel@yahoo.com</p>
              </div>
            </div>
          </article>

          <article class="quicklink card">
            <div style="display:flex;align-items:flex-start;gap:12px;">
              <img src="/image/logo/Wennrod Hotel.jpg" alt="Wennrod Hotel" style="width:40px;height:40px;border-radius:8px;object-fit:cover;" />

              <div>
                <strong>Wennrod Hotel</strong>
                <p class="muted">Governor Carpio Road, Kumintang Ibaba, Batangas City, Philippines</p>
                <p class="muted">Phone: 0917 156 5098</p>
                <p class="muted">Email: wennrodhotel28@gmail.com</p>
              </div>
            </div>
          </article>

          <article class="quicklink card">
            <div style="display:flex;align-items:flex-start;gap:12px;">
              <img src="/image/logo/Bicotels Hotel.jpg" alt="Bicotels Hotel" style="width:40px;height:40px;border-radius:8px;object-fit:cover;" />

              <div>
                <strong>Bicotels Hotel</strong>
                <p class="muted">At the back of SAWALI Resto, Bagui St. Kumintang Ibaba, Batangas City, Philippines</p>
                <p class="muted">Phone: 0917 627 3442</p>
                <p class="muted">Email: bicotelshotel@gmail.com</p>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Floating Chat Widget (now powered by in-app chatbot) -->
    <div class="chat-widget" aria-live="polite">
      <div class="chat-widget-teaser" id="chat-widget-teaser">
        <span class="chat-widget-teaser-text">ðŸ‘‹ Hi, Iâ€™m the HotelLink AI assistant.</span>
        <button type="button" class="chat-widget-teaser-close" id="chat-widget-teaser-close" aria-label="Hide assistant message">&times;</button>
      </div>
      <div class="chat-widget-panel" id="chat-widget-panel">
        <div class="chat-widget-header">
          <div class="chat-widget-title">
            <img src="/image/logo/HTLogo.png" alt="HotelLink chat" class="chat-widget-title-logo" />
            <div>
              <strong>Chat with HotelLink</strong>
              <span class="chat-widget-subtitle">Ask about rooms, rates, or hotel info</span>
            </div>
          </div>
          <button type="button" id="chat-widget-close" class="chat-widget-close" aria-label="Close chat">&times;</button>
        </div>
        <div class="chat-widget-body">
          <div class="chat-widget-messages" id="chat-messages">
            <div class="chat-message chat-message-bot">
              <div class="chat-bubble">
                ðŸ‘‹ Hi, Iâ€™m the HotelLink AI assistant. You can ask me about room types, availability, pricing, or hotel policies.
              </div>
            </div>
          </div>
          <form class="chat-widget-input-row" id="chat-form" autocomplete="off">
            <input
              type="text"
              id="chat-input"
              class="chat-input"
              name="message"
              placeholder="Type your question here..."
              aria-label="Type your question for HotelLink assistant"
              required
            />
            <button type="submit" id="chat-send-btn" class="chat-send-btn">Send</button>
          </form>
          <p class="chat-widget-hint">Powered by HotelLink AI (Gemini + Firestore)</p>
        </div>
      </div>

      <button
        type="button"
        id="chat-widget-toggle"
        class="chat-widget-button"
        aria-label="Open chat with HotelLink"
      >
        <img src="/image/logo/HTLogo.png" alt="Chat with HotelLink" />
      </button>
    </div>

  </main>

  <footer>
    <div class="container">
      <p style="text-align: center;">&copy; 2025 Dâ€™ Mariners Inn Hotel. All rights reserved.</p>
    </div>
  </footer>

  <!-- keep existing modules -->
  <script type="module" src="./js/qr.js"></script>
  <script type="module" src="./js/auth.js"></script>

  <script type="module">
    import { auth } from './js/firebase-config.js';
    import { updateNavVisibility, highlightActiveNavBtn } from './js/nav-control.js';
    import { initializeWeatherCards } from './js/weather.js';
    import { logout } from './js/auth.js';
    import { logVisit } from './js/analytics.js';

    // --- Intro overlay: hide content until welcome animation finishes ---
    const initIntroOverlay = () => {
      const body = document.body;
      const overlay = document.getElementById('intro-overlay');
      if (!overlay || !body) return;

      // hide underlying content while intro is active
      body.classList.add('intro-active');

      // fade out overlay near the end of the text animation
      const fadeDelay = 2600; // ms
      const removeDelay = 3400; // ms

      setTimeout(() => {
        overlay.classList.add('is-fading');
      }, fadeDelay);

      setTimeout(() => {
        body.classList.remove('intro-active');
        if (overlay && overlay.parentNode) {
          overlay.parentNode.removeChild(overlay);
        }
      }, removeDelay);
    };

    // --- NEW: Scroll Animation Initializer ---
    const initScrollAnimations = () => {
      // Elements we want to animate on scroll
      const observerElements = [
        // Hero Content (we target the parent and apply visibility to children via CSS)
        document.querySelector('.hero-copy'),
        document.querySelector('.hero-panel'),
        // Feature Cards
        ...document.querySelectorAll('.features-grid .feature-card'),
        // Quick Links
        ...document.querySelectorAll('.quicklinks-row .quicklink')
      ].filter(el => el != null); // Filter out any null elements

      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Element is now in view
            entry.target.classList.add('is-visible');
            // Stop observing once it has been animated
            observer.unobserve(entry.target);
          }
        });
      }, {
        // Options for the observer: start animating when 10% of element is visible
        threshold: 0.1
      });

      observerElements.forEach(el => observer.observe(el));
    };
    // --- END NEW FUNCTION ---

    // Function to handle visibility of all public-facing elements (from previous step)
    const updatePublicContentVisibility = (user) => {
      // ... (Rest of the previous logic for hiding login/signup links) ...
      const publicNavElements = document.querySelectorAll('.nav-btn.public-only');
      const heroCtas = document.querySelector('.hero-ctas');
      const quicklinks = document.querySelector('.quicklinks-row');

      if (user) {
        publicNavElements.forEach(el => el.style.display = 'none');
        if (heroCtas) heroCtas.style.display = 'none';

        const publicQuicklinks = quicklinks.querySelectorAll('a:not(.restricted)');
        publicQuicklinks.forEach(el => el.style.display = 'none');

      } else {
        publicNavElements.forEach(el => el.style.display = '');
        if (heroCtas) heroCtas.style.display = 'flex';

        const publicQuicklinks = quicklinks.querySelectorAll('a:not(.restricted)');
        publicQuicklinks.forEach(el => el.style.display = 'flex');
      }
    };
    // --- END PREVIOUS LOGIC ---

    // Initial load checks
    initIntroOverlay();
    updateNavVisibility();

    highlightActiveNavBtn();

    // Ensure public-only nav (Home/About/Contacts/Login) is hidden for signed-in users immediately
    const initialUser = auth.currentUser || null;
    updatePublicContentVisibility(initialUser);

    // Log customer home page visit (for internal analytics dashboard)
    logVisit('customer-home').catch(() => {});

    // Run the new animation function
    initScrollAnimations();

    auth.onAuthStateChanged((user) => {
      updateNavVisibility();
      highlightActiveNavBtn();
      updatePublicContentVisibility(user);
      
    });

    // Mobile nav hamburger toggle
    const navToggle = document.getElementById('nav-toggle');
    const mainNav = document.getElementById('main-nav');

    const closeMobileNav = () => {
      document.body.classList.remove('nav-open');
      if (navToggle) navToggle.setAttribute('aria-expanded', 'false');
    };

    if (navToggle && mainNav) {
      navToggle.addEventListener('click', () => {
        const isOpen = document.body.classList.toggle('nav-open');
        navToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      });

      // Close menu when a nav link is clicked (on mobile)
      mainNav.querySelectorAll('.nav-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          if (window.innerWidth <= 720) {
            closeMobileNav();
          }
        });
      });

      // Reset state when resizing back to desktop
      window.addEventListener('resize', () => {
        if (window.innerWidth > 720) {
          closeMobileNav();
        }
      });
    }

    const loginCta = document.getElementById('login-cta');
    if (loginCta) {
      loginCta.addEventListener('click', () => {
        window.location.href = 'pages/login.html';
      });
    }

    const signupCta = document.getElementById('signup-cta');
    if (signupCta) {
      signupCta.addEventListener('click', () => {
        window.location.href = 'pages/signup.html';
      });
    }

    // Wennrod Hotel "See more" toggle
    const wennrodToggle = document.getElementById('wennrod-toggle');
    const wennrodMore = document.getElementById('wennrod-more');
    if (wennrodToggle && wennrodMore) {
      wennrodToggle.addEventListener('click', () => {
        const isHidden = wennrodMore.style.display === 'none' || !wennrodMore.style.display;
        wennrodMore.style.display = isHidden ? 'inline' : 'none';
        wennrodToggle.textContent = isHidden ? 'See less' : 'See more...';
      });
    }

    // Bicotels Hotel "See more" toggle
    const bicotelsToggle = document.getElementById('bicotels-toggle');
    const bicotelsMore = document.getElementById('bicotels-more');
    if (bicotelsToggle && bicotelsMore) {
      bicotelsToggle.addEventListener('click', () => {
        const isHidden = bicotelsMore.style.display === 'none' || !bicotelsMore.style.display;
        bicotelsMore.style.display = isHidden ? 'inline' : 'none';
        bicotelsToggle.textContent = isHidden ? 'See less' : 'See more...';
      });
    }

    const logoutBtn = document.getElementById('logout-btn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        try { await logout(); } catch (err) { console.error('Logout failed:', err); }
      });
    }

    // Floating chat widget behavior
    const chatWidgetToggle = document.getElementById('chat-widget-toggle');
    const chatWidgetPanel = document.getElementById('chat-widget-panel');
    const chatWidgetClose = document.getElementById('chat-widget-close');
    const chatWidgetTeaser = document.getElementById('chat-widget-teaser');
    const chatWidgetTeaserClose = document.getElementById('chat-widget-teaser-close');
    const chatMessages = document.getElementById('chat-messages');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');

    const openChatPanel = () => {
      if (!chatWidgetPanel) return;
      chatWidgetPanel.classList.add('is-open');
      if (chatInput) chatInput.focus();
      if (chatWidgetTeaser) chatWidgetTeaser.classList.add('is-hidden');
    };

    const closeChatPanel = () => {
      if (!chatWidgetPanel) return;
      chatWidgetPanel.classList.remove('is-open');
    };

    if (chatWidgetToggle) {
      chatWidgetToggle.addEventListener('click', () => {
        if (chatWidgetPanel?.classList.contains('is-open')) {
          closeChatPanel();
        } else {
          openChatPanel();
        }
      });
    }

    // Teaser click: open chat
    if (chatWidgetTeaser) {
      chatWidgetTeaser.addEventListener('click', (e) => {
        // Avoid double-handling if the close button was clicked
        if ((e.target instanceof HTMLElement) && e.target.classList.contains('chat-widget-teaser-close')) return;
        openChatPanel();
      });
    }

    // Teaser close button
    if (chatWidgetTeaserClose && chatWidgetTeaser) {
      chatWidgetTeaserClose.addEventListener('click', (e) => {
        e.stopPropagation();
        chatWidgetTeaser.classList.add('is-hidden');
      });
    }

    if (chatWidgetClose) {
      chatWidgetClose.addEventListener('click', () => {
        closeChatPanel();
      });
    }

    const appendMessage = (text, from = 'bot') => {
      if (!chatMessages) return;
      const wrapper = document.createElement('div');
      wrapper.className = `chat-message chat-message-${from}`;
      const bubble = document.createElement('div');
      bubble.className = 'chat-bubble';
      bubble.textContent = text;
      wrapper.appendChild(bubble);
      chatMessages.appendChild(wrapper);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    };

    const CHAT_API_BASE = window.API_BASE || 'https://mariners-chatbot.cloud';

    const sendToChatbot = async (message) => {
      try {
        const res = await fetch(`${CHAT_API_BASE}/chat`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message })
        });

        if (!res.ok) {
          throw new Error(`Chatbot error: ${res.status}`);
        }

        const data = await res.json();
        const reply = (data && (data.reply || data.response || data.message)) || '';
        appendMessage(reply || "I'm having trouble answering right now. Please try again in a moment.", 'bot');
      } catch (err) {
        console.error('Chatbot request failed:', err);
        appendMessage("Sorry, I couldn't reach the assistant. Please try again later.", 'bot');
      }
    };

    if (chatForm && chatInput) {
      chatForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const value = chatInput.value.trim();
        if (!value) return;
        appendMessage(value, 'user');
        chatInput.value = '';
        sendToChatbot(value);
      });
    }

    // Customer gallery lightbox (no new tabs)
    const initGalleryLightbox = () => {
      const thumbs = document.querySelectorAll('.gallery-thumb');
      if (!thumbs.length) return;

      let overlay = document.querySelector('.gallery-lightbox-overlay');
      if (!overlay) {
        overlay = document.createElement('div');
        overlay.className = 'gallery-lightbox-overlay';
        overlay.innerHTML = `
          <div class="gallery-lightbox-inner" role="dialog" aria-modal="true">
            <button type="button" class="gallery-lightbox-close" aria-label="Close image">&times;</button>
            <button type="button" class="gallery-lightbox-nav gallery-lightbox-prev" aria-label="Previous image">&#10094;</button>
            <img src="" alt="" />
            <button type="button" class="gallery-lightbox-nav gallery-lightbox-next" aria-label="Next image">&#10095;</button>
            <div class="gallery-lightbox-caption">
              <span class="caption-text"></span>
              <small class="caption-hint">Click outside, use arrows, or press Esc to close</small>
            </div>
          </div>`;
        document.body.appendChild(overlay);
      }

      const imgEl = overlay.querySelector('img');
      const captionText = overlay.querySelector('.caption-text');
      const closeBtn = overlay.querySelector('.gallery-lightbox-close');
      const prevBtn = overlay.querySelector('.gallery-lightbox-prev');
      const nextBtn = overlay.querySelector('.gallery-lightbox-next');

      const thumbArray = Array.from(thumbs);
      let currentIndex = 0;

      const openOverlayAtIndex = (index) => {
        if (!thumbArray.length) return;
        if (index < 0) index = thumbArray.length - 1;
        if (index >= thumbArray.length) index = 0;
        currentIndex = index;

        const thumb = thumbArray[currentIndex];
        const img = thumb.querySelector('img');
        const src = (img && img.src) || thumb.getAttribute('href') || '';
        const alt = (img && img.alt) || '';

        if (imgEl) imgEl.src = src;
        if (imgEl) imgEl.alt = alt;
        if (captionText) captionText.textContent = alt;

        overlay.classList.add('is-open');
        document.body.classList.add('modal-open');
      };

      const closeOverlay = () => {
        overlay.classList.remove('is-open');
        document.body.classList.remove('modal-open');
      };

      thumbs.forEach((thumb) => {
        thumb.addEventListener('click', (e) => {
          e.preventDefault();
          const index = thumbArray.indexOf(thumb);
          openOverlayAtIndex(index === -1 ? 0 : index);
        });
      });

      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeOverlay();
        }
      });

      if (closeBtn) {
        closeBtn.addEventListener('click', () => closeOverlay());
      }

      if (prevBtn) {
        prevBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          openOverlayAtIndex(currentIndex - 1);
        });
      }

      if (nextBtn) {
        nextBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          openOverlayAtIndex(currentIndex + 1);
        });
      }

      document.addEventListener('keydown', (e) => {
        if (!overlay.classList.contains('is-open')) return;
        if (e.key === 'Escape') {
          closeOverlay();
        } else if (e.key === 'ArrowRight') {
          openOverlayAtIndex(currentIndex + 1);
        } else if (e.key === 'ArrowLeft') {
          openOverlayAtIndex(currentIndex - 1);
        }
      });
    };

    initGalleryLightbox();

    // Typed cursive animation for About LinkHotel phrases
    const initAboutTyping = () => {
      const target = document.getElementById('about-typed-text');
      if (!target) return;

      const phrases = [
        'Effortless check in',
        'Smart assistance',
        'Seamless coordination',
        'Minimalist luxury'
      ];

      let phraseIndex = 0;
      let charIndex = 0;
      let deleting = false;

      const typeSpeed = 90;
      const eraseSpeed = 60;
      const holdTime = 1500;

      const tick = () => {
        const current = phrases[phraseIndex];

        if (!deleting) {
          // typing
          target.textContent = current.slice(0, charIndex + 1);
          charIndex++;

          if (charIndex === current.length) {
            // hold full phrase, then start deleting
            setTimeout(() => {
              deleting = true;
              tick();
            }, holdTime);
            return;
          }

          setTimeout(tick, typeSpeed);
        } else {
          // deleting
          target.textContent = current.slice(0, charIndex - 1);
          charIndex--;

          if (charIndex === 0) {
            deleting = false;
            phraseIndex = (phraseIndex + 1) % phrases.length;
            setTimeout(tick, typeSpeed);
            return;
          }

          setTimeout(tick, eraseSpeed);
        }
      };

      tick();
    };

    initAboutTyping();
  </script>
</body>
</html>