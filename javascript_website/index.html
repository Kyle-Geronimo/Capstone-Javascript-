<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HotelLink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/home-enhancements.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>HotelLink</h1>
      <nav>
        <a href="index.html" class="nav-btn public-only">Home</a>
        <div class="user-nav" style="display:none;">
          <a href="pages/chatbot.html" class="nav-btn restricted">Chatbot Data</a>
          <a href="pages/profile.html" class="nav-btn restricted">Profile</a>
          <a href="pages/admin.html" class="nav-btn restricted admin-only">Admin</a>
          <a href="pages/payroll.html" class="nav-btn restricted admin-only">Payroll</a>
          <a href="#" id="logout-btn" class="nav-btn restricted">Logout</a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="home-hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h2>Staff tools built for speed â€” schedules, QR checkâ€‘ins & payroll</h2>
          <p class="lead">HotelLink helps your team manage daily operations with an easy-to-use staff portal. Fast check-ins and secure payroll workflows â€” all in one place.</p>

          <div class="hero-ctas">
            <button id="login-cta" class="action-btn primary">Sign In</button>
            <button id="signup-cta" class="action-btn secondary">Create account</button>
          </div>

          <ul class="trust-features">
            <li><strong>Secure:</strong> Firebase-backed authentication</li>
            <li><strong>Fast:</strong> QR-powered check-in & quick scheduling</li>
            <li><strong>Reliable:</strong> Built for hotel staff workflows</li>
          </ul>
        </div>

        <!-- kept for decorative illustration / hero-only content; removed weather from here -->
        <aside class="hero-panel" aria-hidden="true">
          <div class="panel card">
            <img src="/image/logo/HTLogo.png" alt="" style="width:100%;max-width:320px;margin-top:12px;" />
          </div>
        </aside>
      </div>
    </section>

    <!-- FEATURES GRID -->
    <section class="home-features">
      <div class="container">
        <h3 class="section-title">What you can do</h3>
        <div class="features-grid">
          <div class="feature-card card">
            <svg class="feature-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2v6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><rect x="3" y="8" width="18" height="13" rx="2" stroke="currentColor" stroke-width="1.4"/></svg>
            <div>
              <h4>Quick checkâ€‘ins</h4>
              <p class="muted">Scan QR codes to speed up staff checkâ€‘ins.</p>
            </div>
          </div>

          <div class="feature-card card">
            <svg class="feature-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 7h10M7 11h10M7 15h10" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <div>
              <h4>Chatbot Queries</h4>
              <p class="muted">Knowing your customer's wants and needs is always a must.</p>
            </div>
          </div>

          <div class="feature-card card">
            <svg class="feature-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3v7l5 2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.4"/></svg>
            <div>
              <h4>Payroll & reports</h4>
              <p class="muted">Export payroll-ready reports and manage deductions with confidence.</p>
            </div>
          </div>

          <div class="feature-card card">
            <svg class="feature-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l3 7h7l-5.5 4 2 7L12 16l-6.5 4 2-7L2 9h7z" stroke="currentColor" stroke-width="1.2" fill="none"/></svg>
            <div>
              <h4>Total Control</h4>
              <p class="muted">Oversee your staff's necessary information to increase workplace efficiency.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUICK LINKS -->
    <section class="home-quicklinks">
      <div class="container">
        <div class="quicklinks-row">
          <a class="quicklink card" href="pages/login.html">
            <strong>Sign In</strong>
            <span class="muted">Access staff portal</span>
          </a>
          <a class="quicklink card" href="pages/signup.html">
            <strong>Create account</strong>
            <span class="muted">Request access</span>
          </a>
          <a class="quicklink card restricted admin-only" href="pages/admin.html" style="display:none;">
            <strong>Admin</strong>
            <span class="muted">Manage users & settings</span>
          </a>
        </div>
      </div>
    </section>


  <footer>
    <div class="container">
      <p>&copy; 2025 Dâ€™ Mariners Inn Hotel. All rights reserved.</p>
    </div>
  </footer>

  <!-- keep existing modules -->
  <script type="module" src="./js/qr.js"></script>
  <script type="module" src="./js/auth.js"></script>

  <script type="module">
    import { auth } from './js/firebase-config.js';
    import { updateNavVisibility, highlightActiveNavBtn } from './js/nav-control.js';
    import { initializeWeatherCards } from './js/weather.js';
    import { logout } from './js/auth.js';

    // --- NEW: Scroll Animation Initializer ---
    const initScrollAnimations = () => {
      // Elements we want to animate on scroll
      const observerElements = [
        // Hero Content (we target the parent and apply visibility to children via CSS)
        document.querySelector('.hero-copy'),
        document.querySelector('.hero-panel'),
        // Feature Cards
        ...document.querySelectorAll('.features-grid .feature-card'),
        // Quick Links
        ...document.querySelectorAll('.quicklinks-row .quicklink')
      ].filter(el => el != null); // Filter out any null elements

      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Element is now in view
            entry.target.classList.add('is-visible');
            // Stop observing once it has been animated
            observer.unobserve(entry.target);
          }
        });
      }, {
        // Options for the observer: start animating when 10% of element is visible
        threshold: 0.1 
      });

      observerElements.forEach(el => observer.observe(el));
    };
    // --- END NEW FUNCTION ---

    // Function to handle visibility of all public-facing elements (from previous step)
    const updatePublicContentVisibility = (user) => {
      // ... (Rest of the previous logic for hiding login/signup links) ...
      const publicNavElements = document.querySelectorAll('.nav-btn.public-only');
      const heroCtas = document.querySelector('.hero-ctas');
      const quicklinks = document.querySelector('.quicklinks-row');
      
      if (user) {
        publicNavElements.forEach(el => el.style.display = 'none');
        if (heroCtas) heroCtas.style.display = 'none';
        
        const publicQuicklinks = quicklinks.querySelectorAll('a:not(.restricted)');
        publicQuicklinks.forEach(el => el.style.display = 'none');
        
      } else {
        publicNavElements.forEach(el => el.style.display = '');
        if (heroCtas) heroCtas.style.display = 'flex';
        
        const publicQuicklinks = quicklinks.querySelectorAll('a:not(.restricted)');
        publicQuicklinks.forEach(el => el.style.display = 'flex');
      }
    };
    // --- END PREVIOUS LOGIC ---

    // Initial load checks
    updateNavVisibility();
    highlightActiveNavBtn();
    
    // ðŸ’¡ Run the new animation function
    initScrollAnimations();

    auth.onAuthStateChanged((user) => {
      updateNavVisibility();
      highlightActiveNavBtn();
      updatePublicContentVisibility(user);
      
    });

    document.getElementById('login-cta').addEventListener('click', () => window.location.href = 'pages/login.html');
    document.getElementById('signup-cta').addEventListener('click', () => window.location.href = 'pages/signup.html');

    const logoutBtn = document.getElementById('logout-btn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        try { await logout(); } catch (err) { console.error('Logout failed:', err); }
      });
    }
  </script>
</body>
</html>